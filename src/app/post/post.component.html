@if (post) {
  <div
    class="post"
    role="link"
    tabindex="0"
    aria-label="Open post"
    (click)="onPostCardClick($event)"
    (keydown)="onPostCardKeydown($event)"
  >
    <div class="post-content">
      <img
        [src]="post.photoURL ?? 'assets/images/png-transparent-default-avatar.png'"
        alt="Profile Picture"
        (click)="stopEvent($event)"
      >
      <div class="item6">â€¢ {{ post.createdAt | relativeTime}}</div>
      <div class="item3">{{ post.views }} views</div>
      <div class="item8">
        <div class="menu-anchor" #menuAnchor>
          <button mat-mini-fab (click)="stopEvent($event); openPostMenu()">
            <mat-icon>more_vert</mat-icon>
          </button>

          <!--Fix issue below. Link UID-->
         @if (isPostMenuOpen) {
          <div class="post-menu open">
            <app-post-menu
              [postId]="post.postId"
              [postOwnerId]="post.userId"
              [currentUser]="(currentUser$ | async)!"
              (deleted)="onMenuDeleted($event)"
              (close)="isPostMenuOpen = false">
            </app-post-menu>
          </div>
         }
        </div>
      </div>

      <a [routerLink]="['/profile', post.displayName]" style="text-decoration: none;" (click)="stopEvent($event)">
        <h1>{{ post.displayName }}</h1>
      </a>
      @if (!post.imageUrl) {
        <div class="item4 body">
          {{ post.body }}
        </div>
      } @else {
        <div class="item4 body">
          {{ post.body }}
          <img [src]="post.imageUrl" alt="Post Image"
            style=
            "display: block;
            max-height: 400px;
            width: 100%;
            object-fit: cover;
            border-radius: 10px;
            margin: 10px auto;">
        </div>
      }
      <div class="item5">
        <div class="footer-left">
          <button mat-mini-fab class="vote-button up" (click)="stopEvent($event); likePost()" [ngClass]="{'liked': isLiked}">
            <mat-icon>thumb_up</mat-icon>
          </button>
          <div class="vote-count up">
            {{ post.likeCount }}
          </div>
          <button mat-mini-fab class="vote-button down" (click)="stopEvent($event); dislikePost()" [ngClass]="{'disliked': isDisliked}">
            <mat-icon>thumb_down</mat-icon>
          </button>
          <div class="vote-count down">
            {{ post.dislikeCount }}
          </div>
          <button mat-mini-fab class="action-button" (click)="stopEvent($event)">
            <mat-icon>bookmark</mat-icon>
          </button>
          <div style="color: lightgoldenrodyellow">
            {{ post.bookmarkCount }}
          </div>
          <button mat-mini-fab class="action-button" (click)="stopEvent($event)">
            <mat-icon>repeat</mat-icon>
          </button>
          <div style="color: lightblue">
            {{ post.repostCount }}
          </div>
        </div>
        <div class="footer-right">
          <button
            class="comment-button action-button"
            mat-mini-fab
            (click)="stopEvent($event); openCommentEditor()"
            [ngClass]="{'commenting': isCommentEditorOpen}"
          >
            <mat-icon>chat_bubble</mat-icon>
          </button>
          <div class="comment-count">
            {{ post.commentCount }}
          </div>
        </div>
      </div>
    </div>
    <div class="comment-section">
      <app-comment-list [comments]="commentsList" [post]="post"></app-comment-list>
    </div>
    <div class="comment-editor" [ngClass]="{'open': isCommentEditorOpen}">
      @if (isCommentEditorOpen) {
        <app-comment-editor [postId]="post.postId"></app-comment-editor>
      }
    </div>
    
  </div>
}
